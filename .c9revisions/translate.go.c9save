{"ts":1354874342448,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"package main\n\nimport (\n    \"encoding/json\"\n\t\"fmt\"\n\t\"io/ioutil\"\n\t\"log\"\n\t\"net/http\"\n\t\"net/url\"\n)\n\nconst (\n\tapi     = \"https://www.googleapis.com/language/translate/v2\"\n\tAPI_KEY = \"PU_API_KEY_HERE\"\n)\n\ntype InputText struct {\n\tPlainText      string\n\tTargetLanguage string\n\tValues         url.Values\n}\n\ntype Translation struct {\n\tData         string\n\tTranslations []struct {\n\t\tTranslatedText string\n\t\tSourceLanguage string\n\t}\n}\n\nfunc (i *InputText) TranslateString() (*Translation, error) {\n\tif len(i.PlainText) == 0 {\n\t\tlog.Fatal(\"No text specified\")\n\t}\n\tif len(i.TargetLanguage) == 0 {\n\t\tlog.Fatal(\"No target language specified\")\n\t}\n\n\ti.Values = make(url.Values)\n\tvar v = i.Values\n\tv.Set(\"target\", i.TargetLanguage)\n\tv.Set(\"key\", API_KEY)\n\tv.Set(\"q\", i.PlainText)\n\n\tu := fmt.Sprintf(\"%s?%s\", api, v.Encode())\n\tgetResp, err := http.Get(u)\n\tif err != nil {\n\t\tlog.Fatal(\"error\", err)\n\t\treturn nil, err\n\t}\n\tdefer getResp.Body.Close()\n\tbody, _ := ioutil.ReadAll(getResp.Body)\n\tt := new(Translation)\n\tjson.Unmarshal(body, &t)\n\n\treturn t, nil\n\n}\n\nfunc main() {\n\tinput := &InputText{\"My name is John, I was born in Nairobi and I am 31 years old\", \"ES\", nil}\n\ttranslation, _ := input.TranslateString()\n\tfmt.Println(translation)\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1218}]],"length":1218}
{"contributors":[],"silentsave":false,"ts":1354881488281,"patch":[[{"diffs":[[0," = \""],[-1,"PU_API_KEY_HERE"],[1,"AIzaSyCZgHLcE8sdd0UX2K9RWS_1LKZ4v2YGCjs"],[0,"\"\n)\n"]],"start1":174,"start2":174,"length1":23,"length2":47},{"diffs":[[0,"ata "],[-1,"        string\n"],[1,"struct {\n\t"],[0,"\tTra"]],"start1":350,"start2":350,"length1":23,"length2":18},{"diffs":[[0,"ns []struct {\n\t\t"],[1,"\t"],[0,"TranslatedText s"]],"start1":375,"start2":375,"length1":32,"length2":33},{"diffs":[[0,"tedText "],[1,"        "],[0,"string\n\t"]],"start1":399,"start2":399,"length1":16,"length2":24},{"diffs":[[0,"tring\n\t\t"],[1,"\tDetected"],[0,"SourceLa"]],"start1":416,"start2":416,"length1":16,"length2":25},{"diffs":[[0," string\n"],[1,"\t\t}\n"],[0,"\t}\n}\n\nfu"]],"start1":447,"start2":447,"length1":16,"length2":20},{"diffs":[[0,")\n\tf"],[-1,"mt.Println(translation)"],[1,"or _, t := range translation.Data.Translations {\n\t\tfmt.Printf(\"----\\n\")\n\t\tfmt.Printf(\"translatedText: %s\\n\", t.TranslatedText)\n\t\tfmt.Printf(\"detectedSourceLanguage: %s\\n\", t.DetectedSourceLanguage)\n\t}"],[0,"\n}\n"]],"start1":1229,"start2":1229,"length1":30,"length2":207}]],"length":1436,"saved":false}
{"ts":1354881502763,"patch":[[{"diffs":[[0," = \""],[-1,"AIzaSyCZgHLcE8sdd0UX2K9RWS_1LKZ4v2YGCjs"],[1,"SERVER_API_KEY"],[0,"\"\n)\n"]],"start1":174,"start2":174,"length1":47,"length2":22}]],"length":1411,"saved":false}
