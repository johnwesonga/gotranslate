{"ts":1354874342448,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"package main\n\nimport (\n    \"encoding/json\"\n\t\"fmt\"\n\t\"io/ioutil\"\n\t\"log\"\n\t\"net/http\"\n\t\"net/url\"\n)\n\nconst (\n\tapi     = \"https://www.googleapis.com/language/translate/v2\"\n\tAPI_KEY = \"PU_API_KEY_HERE\"\n)\n\ntype InputText struct {\n\tPlainText      string\n\tTargetLanguage string\n\tValues         url.Values\n}\n\ntype Translation struct {\n\tData         string\n\tTranslations []struct {\n\t\tTranslatedText string\n\t\tSourceLanguage string\n\t}\n}\n\nfunc (i *InputText) TranslateString() (*Translation, error) {\n\tif len(i.PlainText) == 0 {\n\t\tlog.Fatal(\"No text specified\")\n\t}\n\tif len(i.TargetLanguage) == 0 {\n\t\tlog.Fatal(\"No target language specified\")\n\t}\n\n\ti.Values = make(url.Values)\n\tvar v = i.Values\n\tv.Set(\"target\", i.TargetLanguage)\n\tv.Set(\"key\", API_KEY)\n\tv.Set(\"q\", i.PlainText)\n\n\tu := fmt.Sprintf(\"%s?%s\", api, v.Encode())\n\tgetResp, err := http.Get(u)\n\tif err != nil {\n\t\tlog.Fatal(\"error\", err)\n\t\treturn nil, err\n\t}\n\tdefer getResp.Body.Close()\n\tbody, _ := ioutil.ReadAll(getResp.Body)\n\tt := new(Translation)\n\tjson.Unmarshal(body, &t)\n\n\treturn t, nil\n\n}\n\nfunc main() {\n\tinput := &InputText{\"My name is John, I was born in Nairobi and I am 31 years old\", \"ES\", nil}\n\ttranslation, _ := input.TranslateString()\n\tfmt.Println(translation)\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1218}]],"length":1218}
